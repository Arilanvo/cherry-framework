!function(e,r){"use strict";r.utilites.namespace("ui_elements.repeater"),r.ui_elements.repeater={init:function(e){r.status.is_ready?this.render(e,this):r.variable.$document.on("ready",this.render(e,this))},triggerChange:function(e){var r=e.find("input[name]:first, select[name]:first");void 0!==wp.customize&&(r.trigger("change"),r.trigger("keydown"),r.trigger("propertychange"))},render:function(t,i){var a=e(".cherry-ui-repeater-container",t);a.each(function(t){var a=e(this),n=e(".cherry-ui-repeater-list",a),c=n.data("name"),s=n.data("title-field"),o=wp.template(c);a.on("click",".cherry-ui-repeater-add",function(e){var t=n.data("index"),a=n.append(o({index:t})).find(".cherry-ui-repeater-item:last");e.preventDefault(),r.variable.$window.trigger("cherry-ui-elements-init",{target:a}),t++,n.data("index",t),i.triggerChange(a)}),n.on("click",".cherry-ui-repeater-remove",function(r){r.preventDefault(),e(this).closest(".cherry-ui-repeater-item").remove(),i.triggerChange(n)}),n.on("click",".cherry-ui-repeater-toggle",function(r){var t=e(this).closest(".cherry-ui-repeater-item"),i="cherry-ui-repeater-min";r.preventDefault(),t.hasClass(i)?t.removeClass(i):t.addClass(i)}),n.on("change","."+s+"-wrap input, textarea, select",function(){var r=e(this),t=r.val(),i=r.closest(".cherry-ui-repeater-item"),a=e(".cherry-ui-repeater-title",i);a.html(t)}),n.sortable({items:".cherry-ui-repeater-item",handle:".cherry-ui-repeater-actions-box",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"sortable-placeholder",update:function(){i.triggerChange(e(this))}})})}},e(window).on("cherry-ui-elements-init",function(e,t){r.ui_elements.repeater.init(t.target)})}(jQuery,window.CherryJsCore);